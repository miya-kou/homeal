{%- assign main_menu = linklists[section.settings.main_menu_link_list] -%}

{%- assign logo_alignment = 'left' -%}

{% render 'drawer-menu',
  main_menu: main_menu
  logo_alignment: logo_alignment
%}
{% render 'cart-drawer' %}

{%- assign template_name = template | replace: '.', ' ' | truncatewords: 2, '' | handle -%}

<div data-section-id="{{ section.id }}" data-section-type="header-section">
  <div class="header-wrapper">
    {% if section.settings.show_announcement %}
      {% render 'announcement-bar', section: section %}
    {% endif %}

    {% if page.handle == "homeal-diagnosis" %}
        <header class="site-header c-header">
      <a href="{{ routes.root_url }}" class="c-header__logo">{{ 'logo.png' | asset_url | img_tag:'homeal'}}</a>
      <nav class="c-header__flexbox c-pc_only--flex">
        {% render 'header-desktop-nav', main_menu: main_menu %}
        <figure class="c-header__partition">{{ 'line-header_vertical.png' | asset_url | img_tag}}</figure>
        {% render 'header-icons', section: section %}
      </nav>
      <div class="header-right-sp_only c-sp_only">
        <div class="c-header__icon--cart c-sp_only">
          <a href="{{ routes.cart_url }}" class="c-header__iconbox_link js-drawer-open-cart js-no-transition" aria-controls="CartDrawer" data-icon="{{ settings.cart_icon }}">
            {%- if settings.cart_icon == 'bag' -%}
              <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-bag" viewBox="0 0 64 64"><g fill="none" stroke="#000" stroke-width="2"><path d="M25 26c0-15.79 3.57-20 8-20s8 4.21 8 20"/><path d="M14.74 18h36.51l3.59 36.73h-43.7z"/></g></svg>
            {%- else -%}
              {{ 'icn_cart.png' | asset_url | img_tag}}
            {%- endif -%}
            
            <span class="cart-link__bubble{% if cart.item_count > 0 %} cart-link__bubble--visible{% endif %}"></span>
          </a>
        </div>
        <div class="c-menu_btn c-sp_only js-open_menu"><span></span><span></span><span></span></div>
      </div>
    {% comment %}
      <div class="site-header__search-container">
        <div class="site-header__search">
          <div class="page-width">
            <form action="{{ routes.search_url }}" method="get" id="HeaderSearchForm" class="site-header__search-form" role="search">
              <input type="hidden" name="type" value="{{ settings.search_type }}">
              <button type="submit" class="text-link site-header__search-btn">
                <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-search" viewBox="0 0 64 64"><path d="M47.16 28.58A18.58 18.58 0 1 1 28.58 10a18.58 18.58 0 0 1 18.58 18.58zM54 54L41.94 42"/></svg>
                <span class="icon__fallback-text">{{ 'general.search.submit' | t }}</span>
              </button>
              <input type="search" name="q" value="{{ search.terms | escape | replace: '*', '' }}" placeholder="{{ 'general.search.placeholder' | t }}" class="site-header__search-input" aria-label="{{ 'general.search.placeholder' | t }}">
            </form>
            <button type="button" class="js-search-header-close text-link site-header__search-btn">
              <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 64 64"><path d="M19 17.61l27.12 27.13m0-27.12L19 44.74"/></svg>
              <span class="icon__fallback-text">{{ 'general.accessibility.close_modal' | t | json }}</span>
            </button>
          </div>
        </div>
        {%- if settings.predictive_search_enabled -%}
          <div class="predictive-results hide">
            <div class="page-width">
              <div id="PredictiveResults"></div>
              <div class="text-center predictive-results__footer">
                <button type="button" class="btn btn--small" data-predictive-search-button>
                  <small>
                    {{ 'general.search.view_more' | t }}
                  </small>
                </button>
              </div>
            </div>
          </div>
        {%- endif -%}
      </div>
      {% endcomment %}
    </header>
    
    
    {% else %}
    <header class="site-header c-header {% if section.settings.show_announcement %}announcebarIn{% endif %}">
      <a href="{{ routes.root_url }}" class="c-header__logo">{{ 'logo.png' | asset_url | img_tag:'homeal'}}</a>
      <nav class="c-header__flexbox c-pc_only--flex">
        {% render 'header-desktop-nav', main_menu: main_menu %}
        <figure class="c-header__partition">{{ 'line-header_vertical.png' | asset_url | img_tag}}</figure>
        {% render 'header-icons', section: section %}
      </nav>
      <div class="header-right-sp_only">
        <div class="c-header__icon--cart c-sp_only">
          <a href="{{ routes.cart_url }}" class="c-header__iconbox_link js-drawer-open-cart js-no-transition" aria-controls="CartDrawer" data-icon="{{ settings.cart_icon }}">
            {%- if settings.cart_icon == 'bag' -%}
              <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-bag" viewBox="0 0 64 64"><g fill="none" stroke="#000" stroke-width="2"><path d="M25 26c0-15.79 3.57-20 8-20s8 4.21 8 20"/><path d="M14.74 18h36.51l3.59 36.73h-43.7z"/></g></svg>
            {%- else -%}
              {{ 'icn_cart.png' | asset_url | img_tag}}
            {%- endif -%}
            
            <span class="cart-link__bubble{% if cart.item_count > 0 %} cart-link__bubble--visible{% endif %}"></span>
          </a>
        </div>
        <div class="c-menu_btn c-sp_only js-open_menu"><span></span><span></span><span></span></div>
      </div>
	  {% comment %}
      <div class="site-header__search-container">
        <div class="site-header__search">
          <div class="page-width">
            <form action="{{ routes.search_url }}" method="get" id="HeaderSearchForm" class="site-header__search-form" role="search">
              <input type="hidden" name="type" value="{{ settings.search_type }}">
              <button type="submit" class="text-link site-header__search-btn">
                <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-search" viewBox="0 0 64 64"><path d="M47.16 28.58A18.58 18.58 0 1 1 28.58 10a18.58 18.58 0 0 1 18.58 18.58zM54 54L41.94 42"/></svg>
                <span class="icon__fallback-text">{{ 'general.search.submit' | t }}</span>
              </button>
              <input type="search" name="q" value="{{ search.terms | escape | replace: '*', '' }}" placeholder="{{ 'general.search.placeholder' | t }}" class="site-header__search-input" aria-label="{{ 'general.search.placeholder' | t }}">
            </form>
            <button type="button" class="js-search-header-close text-link site-header__search-btn">
              <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 64 64"><path d="M19 17.61l27.12 27.13m0-27.12L19 44.74"/></svg>
              <span class="icon__fallback-text">{{ 'general.accessibility.close_modal' | t | json }}</span>
            </button>
          </div>
        </div>
        {%- if settings.predictive_search_enabled -%}
          <div class="predictive-results hide">
            <div class="page-width">
              <div id="PredictiveResults"></div>
              <div class="text-center predictive-results__footer">
                <button type="button" class="btn btn--small" data-predictive-search-button>
                  <small>
                    {{ 'general.search.view_more' | t }}
                  </small>
                </button>
              </div>
            </div>
          </div>
        {%- endif -%}
      </div>
      {% endcomment %}
    </header>
    {% endif %}
  </div>
</div>

<div class="c-menu">
  <nav class="c-menu__nav">
    {% render 'header-sp-nav', main_menu: main_menu %}
    {% render 'header-icons', section: section %}
  </nav>
</div>

{% schema %}
  {
    "name": "Header and menus",
    "settings": [
      {
        "type": "link_list",
        "id": "main_menu_link_list",
        "label": "Menu",
        "default": "main-menu"
      },
      {
        "type": "header",
        "content": "Announcement bar"
      },
      {
        "type": "checkbox",
        "id": "show_announcement",
        "label": "Show an announcement"
      },
      {
        "type": "text",
        "id": "announcement_text",
        "label": "Announcement text",
        "default": "Free shipping and returns",
        "info": "When closed, the announcement will remain closed until the next visit. Change the text to see it again."
      },
      {
        "type": "url",
        "id": "announcement_link",
        "label": "Announcement link"
      },
      {
        "type": "checkbox",
        "id": "announcement_closable",
        "label": "Allow users to close announcement"
      }
    ],
    "blocks": [
      {
        "type": "logo",
        "name": "Logo",
        "limit": 1,
        "settings": [
          {
            "type": "image_picker",
            "id": "logo",
            "label": "Logo"
          },
          {
            "type": "image_picker",
            "id": "logo-inverted",
            "label": "White logo",
            "info": "Used when on top of an image"
          }
        ]
      }
    ],
    "default": {
      "settings": {}
    }
  }
{% endschema %}
